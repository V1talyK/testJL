A = rand(10,10);
W = ones(3); W[1] = 2
A[1:7,1:7] = A[1:7,1:7].+A[1:7,1:7]'
A[:,8:10] .= 0
A[8:10,:] .= 0
for i=1:7
    A[i,i] = 0
    A[i,i] = -sum(A[i,:])-1
end

for i=8:10
    A[i,i] = -W[i-7]
end

A[1,1] = A[1,1] - 1
A[2,2] = A[2,2] - 1
A[1,8] = 1
A[2,8] = 1
A[8,1] = 1
A[8,2] = 1

A[5,9] = 1
A[7,10] = 1
A[9,5] = 1
A[10,7] = 1
A[5,5] = A[5,5] - 1
A[7,7] = A[7,7] - 1

b = zeros(10); b[8:10] .= 1
x0 = A\b

B = copy(A)

B[8,8] = -10
B[1,8] = 5
B[2,8] = 5
B[8,1] = 5
B[8,2] = 5

B[1,1] = A[1,1] + A[1,8] - B[1,8]
B[2,2] = A[2,2] + A[2,8] - B[2,8]

x1 = B\b

x1[1] - B[4,4]/A[4,4]*(x1[1] + x1[4])

B[4,4]*(x1[1] + x1[4])
A[4,4]*(x0[1] + x0[4])

B[9,9] = -10
B[5,9] = 10
B[9,5] = 10


B[5,5] = A[5,5] + A[5,9] - B[5,9]

x1 = B\b

x10 = x1[5] - B[9,9]/A[9,9]*(x1[5] - x1[9])

x0[9]

sum(abs,(x0.-x1)[[1,2]])
sum(abs,(x0.-x1)[3:7])

x10 = (sum(x1[1:2]) - B[8,8]/A[8,8]*(sum(x1[1:2]) - x1[8]*2))/2
